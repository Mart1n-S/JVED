{% extends "base.html.twig" %}

{% block body %}
    {{ include('./partials/header.html.twig') }}
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <h1 class="display-1">Gestion des utilisateurs</h1>
                <table class="table table-striped table-hover">
                    <tr>
                        <th>Id</th>
                        <th>Pseudo</th>
                        <th>Email</th>
                        <th>Mot de passe</th>
                        <th>Id Role</th>
                        <th>Bloqué</th>
                        <th>Modifié le</th>
                        <th>Modifié le</th>
						<th>Supprimé</th>
                        <th>Actions</th>
                    </tr>
                    {% for user in users %}
                        <form action="{{ path('users_edit') }}" method="post">
                            <tr>
                                <td>{{ user['id'] }}</td>
                                <td>{{ user['pseudo'] }}</td>
                                <td>{{ user['email'] }}</td>
                                <td>{{ user['password'] }}</td>
                                <td>{{ user['roleName'] }}</td>
                                <td>{{ user['bloque'] }}</td>
                                <td>{{ user['createdAt'] }}</td>
                                <td>{{ user['updatedAt'] }}</td>
                                <td>{{ user['deletedAt'] }}</td>
                                <td>
                                    <button type="submit" class="btn btn-primary">Modifier</button>
                                    /
                                    <button type="submit" name="submitDelete" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this item?')">Supprimer</button>

                                    <input type="hidden" name="id" value="{{ user['id'] }}">
                                    <input type="hidden" name="pseudo" value="{{ user['pseudo'] }}">
                                    <input type="hidden" name="email" value="{{ user['email'] }}">
                                    <input type="hidden" name="password" value="{{ user['password'] }}">
                                    <input type="hidden" name="idRole" value="{{ user['roleName'] }}">
                                    <input type="hidden" name="bloque" value="{{ user['bloque'] }}">
                                    <input type="hidden" name="createdAt" value="{{ user['createdAt'] }}">
                                    <input type="hidden" name="updatedAt" value="{{ user['updatedAt'] }}">
                                    <input type="hidden" name="deletedAt" value="{{ user['deletedAt'] }}">
                                </td>
                            </tr>
                        </form>
                    {% endfor %}
                </table>
                <a href="{{ path('users_add') }}" class="btn btn-primary mb-3">Ajouter un utilisateur</a>
            </div>
        </div>
    </div>

    {{ include('./partials/footer.html.twig') }}
{% endblock %}
